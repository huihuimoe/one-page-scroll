/*!
* one-page-scroll 0.2.4
* https://github.com/huihuimoe/one-page-scroll
* Released under the MIT license
*/
const simpleThrottling=(t,e)=>{let s=0;return o=>{const i=Date.now();s+e<i&&(s=i,t(o))}};let init=()=>{const t=new Blob(["body{overflow: hidden}.one-page-scroll--page{width: 100%;height: 100%;overflow: hidden;touch-action: none;position: absolute}"],{type:"text/css"}),e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",URL.createObjectURL(t)),document.head.appendChild(e),init=(()=>{})};class onePageScroll{constructor({el:t,time:e=600,easing:s="ease-out",loop:o=!1,throttling:i}={}){if(init(),!t||!t.length)throw new Error("el is undefined");this.time=e,this.easing=s,this.loop=o,this.pageTotal=t.length,this.active=1,i=i||e,this._el=[].slice.call(t),this._el.forEach((t,e)=>{t.classList.add("one-page-scroll--page"),t.style.transform=`translateY(${100*e}%)`}),this._hash=this._el.map((t,e)=>t.getAttribute("name")||e+1);const a=()=>""===location.hash?1:this._hash.findIndex((t,e)=>{if(["#"+t,"#"+(e+1)].includes(location.hash))return!0})+1;this.goto(a());const h=t=>this.goto(t);this._goto=i?simpleThrottling(h,i):h,window.addEventListener("popstate",t=>{const e=a();e&&this.goto(e,!0)}),["keydown","mousewheel","DOMMouseScroll","touchstart"].map(t=>document.addEventListener(t,this))}goto(t){return(t>this.pageTotal||t<1)&&(t=this.loop?1:this.active),t!==this.active&&(this._el.forEach((e,s)=>{const o=e.style;o.transition=`transform ${this.time}ms ${this.easing}`,o.transform=`translateY(${100*(s-t+1)}%)`}),this._el[this.active-1].dispatchEvent(new CustomEvent("outview")),this._el[t-1].dispatchEvent(new CustomEvent("inview")),this.active=t,!arguments[1]&&history.replaceState({},"","#"+this._hash[t-1])),this}next(){return this.goto(this.active+1)}prev(){return this.goto(this.active-1)}handleEvent(t){const e=t=>{switch(t.keyCode){case 33:case 38:this._goto(this.active-1);break;case 32:case 34:case 40:this._goto(this.active+1);break;case 36:this._goto(1);break;case 35:this._goto(this.pageTotal)}},s=t=>{Math.max(-1,Math.min(1,t.wheelDelta||-t.detail))<0?this._goto(this.active+1):this._goto(this.active-1)},o=t=>{const e=t.touches;e&&e.length&&(this._touchStartY=e[0].pageY,document.addEventListener("touchmove",this))},i=t=>{const e=t.touches;if(e&&e.length){t.preventDefault();const s=this._touchStartY-e[0].pageY;s>=50&&this._goto(this.active+1),s<=-50&&this._goto(this.active-1),Math.abs(s)>=50&&document.removeEventListener("touchmove",this)}};switch(t.type){case"keydown":e(t);break;case"mousewheel":case"DOMMouseScroll":s(t);break;case"touchstart":o(t);break;case"touchmove":i(t)}}}export default onePageScroll;
//# sourceMappingURL=one-page-scroll.esm.min.js.map
